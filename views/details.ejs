<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Deciderr</title>

    <!-- bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>

    <!-- fontawesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/"
        crossorigin="anonymous">

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- my compiled css -->
    <link rel="stylesheet" href="/main.css">

    <script>
        function openEdit() {
            var x = document.getElementById("details");
            var e = document.getElementById("edit");
            if (x.style.display === "none") {
                x.style.display = "block";
                e.style.display = "none";
            } else {
                x.style.display = "none";
                e.style.display = "block";
            }
        }

        function submitEdit() {
            const name = document.getElementById("name").value;
            const url = document.getElementById("url").value;
            const img = document.getElementById("img").value;
            const serve = document.getElementById("new_serve").value;
            const time = document.getElementById("new_time").value;
            const direction = document.getElementById("new_direc").value;

            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    window.location.href = "index.html"
                }
            };
            xhttp.open("POST", "/editRecipe", true);
            xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded")
            xhttp.send("name=" + name + "&serve=" + serve + "&url=" + url + "&img=" + img + "&time=" + time + "&dir=" + direction + "&ingredients=" + ingredients);
        }
    </script>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <a class="navbar-brand" href="/index.html">Deciderr</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false"
            aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="/index.html">Home
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/allRecipe.html">View Recipes</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Pricing</a>
                </li>
            </ul>
        </div>
    </nav>

    <div class="container" id="details">
        <div class="row">
            <a onclick="openEdit()" class="btn btn-outline-success">Edit</a>
            <a "/details/` + obj[x].recipe_id + `" class="btn btn-outline-danger">Delete</a>
        </div>
        
        <h2><%= recipe[0].recipe_name %></h2>

        <p>Makes: <%= recipe[0].serving %> servings</p>

        <p>Time: <%= recipe[0].time %> minutes</p>

        <p>Ingredients</p>
        <ul>
            <li><%= recipe[0].ingredient_name %></li>
        </ul>

        <p>Directions:</p>
        <p><%= recipe[0].direction %></p>
        
    </div>

    <div class="container" id="edit">
        <div class="form-group">
            <label for="recipe_name">Recipe Name: </label>
            <input type="text" for="recipe_name" id="name" required value="<%= recipe[0].recipe_name %>">
        </div>
        <div class="form-group">
            <label for="recipe_url">Url: </label>
            <input type="text" for="recipe_url" id="url" value="<%= recipe[0].url %>">
        </div>
        <div class="form-group">
            <label for="recipe_img">Image link: </label>
            <input type="text" for="recipe_img" id="img" value="<%= recipe.recipe_img %>">
        </div>
        <div class="form-group">
            <label for="recipe_serve">Serving: </label>
            <input type="text" for="recipe_serve" id="new_serve">
        </div>
        <div class="form-group">
            <label for="recipe_time">Time: </label>
            <input type="text" for="recipe_time" id="new_time">
        </div>
        
        <div class="form-inline">
            <div class="form-group mb-2">
                <label for="ingredient">Ingredient: </label>
                <input type="text" for="ingredient" id="new_ing">
            </div>
            <div class="form-group mb-2">
                <label for="amount">Amount: </label>
                <input type="text" for="amount" id="new_amount">
            </div>
            <div class="form-group mb-2">
                <label for="unit">Choose Unit: </label>
                <input type="text" for="unit" id="new_unit">
            </div>
        
        <div class="form-group">
            <label for="recipe_directions">Directions: </label>
            <textarea type="text" for="recipe_directions" id="new_direc"></textarea>
        </div>
        
        <button onclick="submitEdit()">Update recipe</button>
    </div>
    
    

    <footer class="page-footer font-small unique-color-dark pt-4">

        <!-- Footer Elements -->
        <div class="container">

            <!-- Call to action -->
            <ul class="list-unstyled list-inline text-center py-2">
                <li class="list-inline-item">
                    <h5 class="mb-1">Register for free</h5>
                </li>
                <li class="list-inline-item">
                    <a href="#!" class="btn btn-outline-white btn-rounded">Sign up!</a>
                </li>
            </ul>
            <!-- Call to action -->

        </div>
        <!-- Footer Elements -->

        <!-- Copyright -->
        <div class="footer-copyright text-center py-3">Â© 2018 Copyright:
            <a href="https://mdbootstrap.com/education/bootstrap/"> MDBootstrap.com</a>
        </div>
        <!-- Copyright -->

    </footer>


</body>

</html>